function onOpenExternal(){}function loadChildBrowser(e,t){cb=window.plugins.childBrowser;if(e){var n=window.location.href;var r=n.substr(0,n.lastIndexOf("/"))+t;Cordova.exec("ChildBrowserCommand.showWebPage",encodeURI(filePath))}else{cb.showWebPage(t)}}function downloadFileAudioMain(e,t,n,r,i){var s=e.id;var o=e.title;if(document.getElementById("videoStream")){document.getElementById("videoStream").pause()}if(document.getElementById("audioPlayer")){document.getElementById("audioPlayer").pause()}if(typeof i=="undefined"||i==null){i=false}modifyDownloadsFromSpotlightFlag(s,i);downloadFile(s,o,t,n,r)}function changedwFlag(){dwPgflag=true}function downloadFile(e,t,n,r,i,s){dwPgflag=true;var o=1;var u=e;var a=t;var f=t.substr(t.lastIndexOf(".")+1,t.length);if(typeof s=="undefined"||s==null){s=false}$.each(downloadList,function(e,t){if(t.elementId==u){o=0}});if(n){var l=u.substr(1,1);if(l=="A"){downloadFileAudioMainYes(u,a,n,r,i)}else if(l=="V"){downloadFileVideoMain(u,a,n,r,i)}else{downloadFileDocMain(u,a,n,r,i)}}else if(isOnline){$.mobile.changePage("#DownloadsPage");showInProgress();if(o){var c="";var l=u.substr(1,1);var h=new Object;h.elementId=u;h.elementTitle=a;h.isDownloadedFlag=n;h.elementAudio=r;h.val=i;if(downloadList.length>0&&currDownload!=""){if(l=="A"){c=globalPathNew+"/"+u+"."+f;downloadList.push(h);showProgress(a,u,"audio",r,i,c)}else if(l=="V"){c=globalPathNew+"/"+u+"."+f;downloadList.push(h);showProgress(a,u,".mp4",r,i,c)}else{c=globalPathNew+"/"+u+"."+f;downloadList.push(h);showProgress(a,u,"Document File..",r,i,c)}}else{downloadList.push(h);if(l=="A"){c=globalPathNew+"/"+u+"."+f;showProgress(a,u,"audio",r,i,c);downloadFileAudioMainYes(u,a,n,r,i)}else if(l=="V"){c=globalPathNew+"/"+u+"."+f;showProgress(a,u,".mp4",r,i,c);downloadFileVideoMain(u,a,n,r,i)}else{c=globalPathNew+"/"+u+"."+f;showProgress(a,u,"Document File..",r,i,c);downloadFileDocMain(u,a,n,r,i)}}}else{}}else{jAlert("Please go online to download file.","Tech Time")}}function findNextDownloadItem(e){var t="1";if(downloadList.length){$.each(downloadList,function(n,r){if(t=="1"){var i=r.elementId;var s=r.elementTitle;var o=r.isDownloadedFlag;var u=r.elementAudio;var a=r.val;var f=i.substr(1,1);document.getElementById("PB"+i).style.display="block";var l=$("#P"+i+"L").text();if(f=="A"){downloadFileAudioMainYes(i,s,o,u,a)}else if(f=="V"){downloadFileVideoMain(i,s,o,u,a)}else{downloadFileDocMain(i,s,o,u,a)}t="0"}if(r.elementId==e){t="1"}})}else{fileObjAbort=new FileTransfer}}function downloadFileAudioMainYes(e,t,n,r,i){var s=new FileTransfer;var o=e;var u=t;var a=o.substring(0,1);var f=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));var l=f.replace(/_/g," ").replace(/%20/g," ").replace(/%5B/g," ").replace(/%5D/g," ").split(" ").join(" ");var c=u.substr(u.lastIndexOf(".")+1,u.length);currDownload="";currDownload=o;filePath=globalPathNew+o+".mp3";if(n){playMedia(filePath,o,"audio")}else if(u!=""){if(isOnline){try{document.getElementById("PB"+o).style.display="block";document.getElementById("P"+o+"L").innerHTML="Downloading...";s.onprogress=function(e){if(e.lengthComputable){$("#P"+o+"Progress").text(Math.round(100*(e.loaded/e.total))+"%")}else{}};fileObjAbort=s;s.download(u,filePath,function(s){window.GA.trackEventWithCategory("IOS Audios","Audio Downloads",l,1);var u='{"data":{"username":"'+jsonData.loggedUserName+'","downloadedItems":["'+currDownload+'"],"devicePlatform":"'+device.platform+'","deviceUUID":"'+deviceUDID+'","deviceModel":"'+device.model+'"}}';postUserDownloads(u);changeIsdownloadStatus(filePath,o,"audio");if(currElementId!=""&&currElementId!=""&&currElementId!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}var a=-1;$.each(downloadList,function(t,n){if(n.elementId==e){a=t}});if(a!=-1){delete downloadList[a];downloadList.splice(a,1)}findNextDownloadItem(o);if(currDownload==e){if(currElementId!=""&&currElementId!=""&&currElementId!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}deleteProgress(o,t,n,r,i,filePath)},function(t){console.log("Error Code "+t.code);modifyDownloadsFromSpotlightFlag(e,false);if(t.code!=4||t.code!="4"){jAlert("Download was not completed due to lost internet connection. Please connect to the Internet and re-download.","Tech Time")}})}catch(h){var p="There was an error on this page.\n\n";p+="Error description: "+err.message+"\n\n";p+="Click OK to continue.\n\n";console.log("in catch block of audio------>>>>"+p)}}else{jAlert("Please go online to download file.","Tech Time")}}}function downloadFileVideoMain(e,t,n,r,i){var s=new FileTransfer;var o=e;var u=t;var a=u.substr(u.lastIndexOf(".")+1,u.length);var f=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));var l=f.replace(/_/g," ").replace(/%20/g," ").replace(/%5B/g," ").replace(/%5D/g," ").split(" ").join(" ");currDownload="";currDownload=o;filePath=globalPathNew+o+".mp4";if(n){playMedia(filePath,o,"video")}else if(u!=""){if(isOnline){try{filePath=globalPathNew+"/"+o+"."+a;document.getElementById("PB"+o).style.display="block";document.getElementById("P"+o+"L").innerHTML="";document.getElementById("P"+o+"L").innerHTML="Downloading...";s.onprogress=function(e){if(e.lengthComputable){$("#P"+o+"Progress").text(Math.round(100*(e.loaded/e.total))+"%")}else{}};fileObjAbort=s;s.download(u,filePath,function(s){window.GA.trackEventWithCategory("IOS Videos","Video Downloads",l,1);var u='{"data":{"username":"'+jsonData.loggedUserName+'","downloadedItems":["'+currDownload+'"],"devicePlatform":"'+device.platform+'","deviceUUID":"'+deviceUDID+'","deviceModel":"'+device.model+'"}}';postUserDownloads(u);changeIsdownloadStatus(filePath,o,"video");if(currElementId!=""&&currElementId!=""&&currElementId!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}var a=-1;$.each(downloadList,function(t,n){if(n.elementId==e){a=t}});if(a!=-1){delete downloadList[a];downloadList.splice(a,1)}findNextDownloadItem(o);if(currDownload==e){if(currElementId!=""&&currElementId!=""&&currElementId!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}deleteProgress(o,t,n,r,i,filePath)},function(t){modifyDownloadsFromSpotlightFlag(e,false);if(t.code!=4||t.code!="4"){jAlert("Download was not completed due to lost internet connection. Please connect to the Internet and re-download.","Tech Time");console.log("download error"+t.source)}})}catch(c){var h="There was an error on this page.\n\n";h+="Error description: "+err.message+"\n\n";h+="Click OK to continue.\n\n";console.log("in catch block of video------>>>>"+h)}}else{jAlert("Please go online to download file.","Tech Time")}}}function video(e){playMedia(e.title,"name","video")}function onvideoError(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:break;case e.target.error.MEDIA_ERR_NETWORK:break;case e.target.error.MEDIA_ERR_DECODE:break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:break;default:break}}function playMedia(e,t,n){document.getElementById("avPlayer").innerHTML="";playFromDownloadsPage=true;$("#avPlayer").css("display","block");$.mobile.changePage("#itemVideo");if(n=="audio"){var r="";r="<br>"+"<audio id ='audioComp' width=auto height=auto controls=controls>"+"<source src='' type='audio/mp3'></source>"+"Your browser does not support the Audio tag"+"</audio><br>";$("#itemTitle").html("Audio Player");$("#avPlayer").html(r);$("#audioComp").attr("src",e);var i=document.getElementsByTagName("audio")[0];i.src=e;i.load();i.play()}if(n=="video"){var s="";s="<br>"+"<video id ='videoComp' style='width:100%;height:100%;' controls>"+"<source src='' type='video/mp4'></source>"+"our browser does not support the video tag."+"</video><br>";$("#itemTitle").html("Video Player");$("#avPlayer").html(s);var o=document.getElementById("videoComp");o.src=e;o.load();o.play()}}function downloadFileDocMain(e,t,n,r,i){ftd=new FileTransfer;var s=e;var o=t;var u=o.substr(o.lastIndexOf(".")+1,o.length);var a=s.substring(1,2);var f=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));var l=f.replace(/_/g," ").replace(/%20/g," ").replace(/%5B/g," ").replace(/%5D/g," ").split(" ").join(" ");currDownload="";currDownload=s;openDeleteDocumentPath="";filePath=globalPathNew+"/"+s+".pdf";if(n){document.getElementById("a1").style.display="block";document.getElementById("a2").style.display="block";openDeleteDocumentPath=filePath}else if(o!=""){if(isOnline){try{document.getElementById("PB"+s).style.display="block";document.getElementById("P"+s+"L").innerHTML="Downloading...";ftd.onprogress=function(e){if(e.lengthComputable){$("#P"+s+"Progress").text(Math.round(100*(e.loaded/e.total))+"%")}else{}};fileObjAbort=ftd;ftd.download(o,filePath,function(o){if(a=="P"){window.GA.trackEventWithCategory("IOS Presentations","Presentation Downloads",l,1)}else if(a=="D"){window.GA.trackEventWithCategory("IOS Documents","Document Downloads",l,1)}else{window.GA.trackEventWithCategory("IOS Transcripts","Transcript Downloads",l,1)}changeIsdownloadStatus(filePath,s,"document");var u=-1;$.each(downloadList,function(t,n){if(n.elementId==e){u=t}});if(u!=-1){delete downloadList[u];downloadList.splice(u,1)}findNextDownloadItem(s);if(currElementId!=""&&currElementId!=""){var f=window.localStorage.getItem("detailPagecountNum");var c=window.localStorage.getItem("detailPageitemCount");detailPageView(currElementId,currElementtype,f,c)}deleteProgress(s,t,n,r,i,filePath)},function(t){modifyDownloadsFromSpotlightFlag(e,false);if(t.code!=4||t.code!="4"){jAlert("Download was not completed due to lost internet connection. Please connect to the Internet and re-download.","Tech Time")}console.log("upload error code"+t.code)})}catch(c){var h="There was an error on this page.\n\n";h+="Error description: "+err.message+"\n\n";h+="Click OK to continue.\n\n";console.log("in catch block of docuemnt------>>>>"+h)}}else{jAlert("Please go online to download file.","Tech Time")}}}function openDocument(){loadChildBrowser(true,openDeleteDocumentPath);hidePopup()}function deleteDocument(){var e="";var t="";var n="";e=openDeleteDocumentPath.lastIndexOf("/");t=openDeleteDocumentPath.lastIndexOf(".");t=t-e;n=openDeleteDocumentPath.substr(e+1,t-1);deleteFile(openDeleteDocumentPath);changeIsdownloadStatus(openDeleteDocumentPath,n,"delete");hidePopup();var r="";var i="";var s="";refreshFileSystem();if(spotLightFlag){r=window.localStorage.getItem("detailPageelementIdSpot");i=window.localStorage.getItem("detailPagetypeSpot");s=window.localStorage.getItem("detailPagecountNumSpot");spotlightDataTypes(r,i,s)}else{detailPageView(currElementId,currElementtype,currElementcountNum)}}function openIcsFile(e){var t=this;var n=window.plugins.childBrowser;var r=e.title}function downloadTechWatchImages(e,t){var n="";var r=new FileTransfer;if(isOnline){n=globalPathNew+"/images/TechWatchArticle"+t+".png";if(e!=""){r.download(e,n,function(e){},function(e){console.log("download error source "+e.source)})}}}function showProgress(e,t,n,r,i,s){var o="";var u=document.getElementById("showProgressBar").innerHTML;var a="";if(downloadList.length==1){document.getElementById("showProgressBar").innerHTML=""}if(i==1){a="<img src='images/icon_audio.png' style='height:20px; width:20px;border:none;padding:0px;margin-right:10px'/>"}else if(i==2){a="<img src='images/icon_video.png' style='height:20px; width:25px;border:none;padding:0px;margin-right:10px'/>"}else if(i==3){a="<img src='images/icon_presentation.png' style='height:20px; width:20px;border:none;padding:0px;margin-right:10px'/>"}else if(i==4){a="<img src='images/icon_transcript.png' style='height:20px; width:20px;border:none;padding:0px;margin-right:10px'/>"}else if(i==5){a="<img src='images/icon_document.png'  style='height:20px; width:20px;border:none;padding:0px;margin-right:10px'/>"}o=o+"<div id='P"+t+"' style='width:100%; border:none; background:#cccccc; color:white; padding-top:5px;'><table border='0' style='width:100%;'><tr>";o=o+"<td style='width:15%'><label style='margin-left:15px;'>"+a+"</label></td>";o=o+"<td style='width:75%'><label style='color:#ffffff;'><b> "+r+"</b></label></td>";o=o+"<td style='width:10%'><img id="+t+" title="+s+" src='images/cross_mark.png' style='height:15px; width:15px; float:right; margin-right:20px;' onclick='deleteProgressBar(this)'/>";o=o+"</td></tr><tr>";o=o+"<td style='width:100%' colspan='4'><label id='P"+t+"L' style='font-size:12px;color:black;margin-left:14px;'> In queue </label><label id='P"+t+"Progress' style='font-size:12px;color:black;margin-left:14px;'>  </label><img id='PB"+t+"' src='images/progressBar.gif' title='PP"+t+"' style='display:none;width:40%; max-width:250px; float:right; padding-right:15%;'/></td></tr></table><hr style='width:100%;background-color: grey; color: grey; height:1px;'></div>";$("#showProgressBar").append(o)}function abortSuccess(e){jAlert("File deleted successfully.","Tech Time")}function deleteProgressBar(e){var t=e.id;var n="P"+e.id;var r=$("#P"+t+"L").text();jConfirm("Are you sure you want to delete this item?","Tech Time",function(e){if(e==true){document.getElementById(n).innerHTML="";document.getElementById("showProgressBarImage").style.display="none";document.getElementById(n).style.visibility="hidden";if(document.getElementById("showProgressBarImage").style.display=="block"){document.getElementById("showProgressBarImage").style.display="none";document.getElementById(n).style.visibility="hidden";document.getElementById("P"+t+"L").innerHTML=""}if(document.getElementById(n).style.visibility=="visible"){document.getElementById(n).style.visibility="hidden";$("#"+n).remove();document.getElementById("P"+t+"L").innerHTML=""}var i=-1;$.each(downloadList,function(e,n){if(n.elementId==t){i=e}});if(i!=-1){var s=i;delete downloadList[s];downloadList.splice(i,1)}if(r=="Downloading..."){fileObjAbort.abort(abortSuccess,errorDeleteFileSystem);findNextDownloadItem(t)}$("#"+n).remove()}})}function deleteProgress(e,t,n,r,i,s){document.getElementById("PB"+e).style.display="none";e="P"+e;$("#"+e).hide();document.getElementById("showProgressBarImage").style.display="none";document.getElementById(e).style.visibilty="hidden";$.each(downloadList,function(e,t){})}function pushToAllDownloads(e,t,n,r,i,s){var o="";var u=e.substr(2);var a=e.charAt(1);var t="ABCD";$("#P"+e).hide();var f=new Object;f.elementId=u;f.val=i;f.filePath=s;var l=$("#P"+e+"L").text();var c="";var h="";if(i==1){c="images/icon_audio.svg";h="A"}else if(i==2){c="images/icon_video.svg";h="V"}else if(i==3){c="images/icon_presentation.png";h="P"}else if(i==4){c="images/icon_transcript.png";h="T"}else if(i==5){c="images/icon_document.svg";h="D"}if(l=="Download Complete"){o+="<a id="+e+" href='#detailMediaPage' data-transition='slide' style='text-decoration:none;font-style:normal;color:black;display:block;background : #F0EFED'>";o+="<table border=0 style='width:100%;margin:0px;padding:0px;margin-top: 5px;margin-bottom: 5px;border:none;' cellpadding='0' cellspacing='0'>";o+="<tr><td id='"+u+"' style='margin:0px;padding:0px;width:25%;height:100px;' rowspan='3' >";o+="<img src='images/TechTime-AppIcon.png' style='height:75px;width:75px;border:none;margin:auto;margin-left:15px;margin-top:2%'/></td>";o+="<td style='margin :0px; padding:0px; width:65%;color: orange;padding-left:10px;'><b>"+r+"</b></td>";o+="<td style='margin :0px; padding:0px; width:10%;' rowspan='2' align='right'>";o+="<img src='"+c+"' style='border:none;padding:0px;margin-right:10px;height:20px;width:20px;'/>";o+="</td></tr>";o+="<tr>";o+="<td id='' style='margin:0px;padding:0px;width:10%;' align='right'><img src='images/icon_orangeRight.svg' width='30%' height='20px;' style='margin-right:10px;'/></td></tr></table>";o+="<hr style='width:100%;background-color: grey; color: grey; height:.5px;'></a>";$("#allDownloads").append(o)}}function pendingDownloadstoJson(){jsonData.pendingDownloads=downloadList;downloadList=[]}function getNextProgress(e){var t="false";$.each(downloadList,function(n,r){if(t=="true"){document.getElementById("PB"+r.elementId).style.display="block";t="false"}if(r.elementId==e){t="true"}})}function readDownloadedList(e){var t="";var n="";$.each(e,function(e,r){var i=r.id;var s=r.title;var o=r.ddate;var u=r.val;if(u=="1"){n=r.path;downloadContentType="images/icon_audio.png";type="A"}else if(u=="2"){n=r.path;downloadContentType="images/icon_video.png";type="V"}else if(u=="3"){n=r.path;downloadContentType="images/icon_presentation.png";type="P"}else if(u=="4"){n=r.path;downloadContentType="images/icon_transcript.png";type="T"}else if(u=="5"){n=r.path;downloadContentType="images/icon_document.png";type="D"}var a=n.substring(n.lastIndexOf("/")+1,n.length);var f="file://"+globalPathNew+"images/"+i+"thumb.png";if(isOnline){if(downloadedThumbs.indexOf(i+"thumb.png")!=-1){f="file://"+globalPathNew+"images/"+i+"thumb.png"}else if(downloadedThumbs.indexOf(i+"thumb.png")==-1){f="images/TechTime-AppIcon.png"}}else if(!isOnline){if(downloadedThumbs.indexOf(i+"thumb.png")!=-1){f="file://"+globalPathNew+"images/"+i+"thumb.png"}else if(downloadedThumbs.indexOf(i+"thumb.png")==-1){f="images/TechTime-AppIcon.png"}}t+="<a id="+i+" title="+a+" onclick='downloadItemClick(this)' data-transition='slide' style='text-decoration:none;font-style:normal;color:black;display:block;background : #F0EFED'>";t=t+"<div class='listItemClick'><table border=0 style='width:100%;margin:0px;padding:0px;margin-top: 5px;margin-bottom: 5px;border:none;' cellpadding='0' cellspacing='0'>";t=t+"<tr><td id='"+i+"' style='margin:0px;padding:0px;width:25%;height:100px;' rowspan='2' >";t=t+"<img src='"+f+"' style='height:75px;width:75px;margin:auto;margin-left:10px;margin-top:2%'></td>";t=t+"</td><td id='' style='margin:0px; padding:0px; width:65%;color: orange;font-style:bold;padding-left:12px;font-size:16px;padding-top:8px'><b>"+s+"</b></td>";t=t+"<td id='' style='margin:0px; padding:0px; width:15%;' align='right'>";t=t+"<img src='"+downloadContentType+"' style='border:none;padding:0px;margin-right:8px;height:20px;width:20px;vertical-align:middle'/>";t=t+"</td></tr>";t=t+"</table><hr style='width:100%;background-color: grey; color: grey; height:0.5px;'></div></a>"});$("#allDownloads").html(t)}function downloadItemClick(e){var t=e.id;var n=e.title;var r=n.charAt(1);var i="";if(r=="A"){i=globalPathNew+n;playMedia(i,t,"audio")}else if(r=="V"){i=globalPathNew+n;playMedia(i,t,"video")}else{i=globalPathNew+"/"+n;openDeleteDocumentPath="";openDeleteDocumentPath=i;filePath=i;loadChildBrowser(true,i)}}function unique(e){var t=[],n=e.length,r,i,s;for(i=0;i<n;i++){r="";for(s=0;s<t.length;s++){if(e[i].path.substring(e[i].path.lastIndexOf("/")+1,e[i].path.length)==t[s].path.substring(e[s].path.lastIndexOf("/")+1,e[s].path.length)){r=true;break}}if(!r){t.push(e[i])}}readDownloadedList(t);return t}function uniqueFileList(e){var t=[],n=e.length,r,i,s;for(i=0;i<n;i++){r="";for(s=0;s<t.length;s++){if(e[i]==t[s]){r=true;break}}if(!r){t.push(e[i])}}return t}function modifyDownloadsFromSpotlightFlag(e,t){e=e.substr(2,e.length);$.each(jsonData.spotLight,function(n,r){if(r.itemId==e&&!(r.isAudioFromSpotlight=="true"||r.isVideoFromSpotlight=="true"||r.isTranscriptFromSpotlight=="true"||r.isPresentationFromSpotlight=="true"||r.isDocumentFromSpotlight=="true")){if(t){r.isDownloadedFromSpotLight="true"}else{r.isDownloadedFromSpotLight="false"}}})}function CheckAllDownloads(){var e=new Array;$.each(jsonData.downloadedSpotLightItems,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}if(n.isDownloadedPresentation=="true"||n.isDownloadedPresentation=="true"||n.isDownloadedPresentation==true){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}if(n.isDownloadedTranscript=="true"||n.isDownloadedTranscript=="true"||n.isDownloadedTranscript==true){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}if(n.isDownloaded=="true"||n.isDownloaded=="true"||n.isDownloaded==true){var r=new Object;r.id=n.itemId;r.val="5";r.title=n.title;r.path=n.localPath;r.ddate=n.downloadedDateD;e.push(r)}});$.each(jsonData.techConf,function(t,n){if(entries.indexOf("TA"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;var i=n.audioUrl.lastIndexOf(".");var s=n.audioUrl.substr(i,n.audioUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/TA"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateA;e.push(r)}if(entries.indexOf("TV"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;var i=n.videoUrl.lastIndexOf(".");var s=n.videoUrl.substr(i,n.videoUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/TV"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateV;e.push(r)}if(entries.indexOf("TP"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/TP"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateP;e.push(r)}if(entries.indexOf("TT"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/TT"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.audio,function(t,n){if(entries.indexOf("AA"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;var i=n.audioUrl.lastIndexOf(".");var s=n.audioUrl.substr(i,n.audioUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/AA"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateA;e.push(r)}if(entries.indexOf("AV"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;var i=n.videoUrl.lastIndexOf(".");var s=n.videoUrl.substr(i,n.videoUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/AV"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateV;e.push(r)}if(entries.indexOf("AP"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/AP"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateP;e.push(r)}if(entries.indexOf("AT"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/AT"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.video,function(t,n){if(entries.indexOf("VA"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;var i=n.audioUrl.lastIndexOf(".");var s=n.audioUrl.substr(i,n.audioUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/VA"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateA;e.push(r)}if(entries.indexOf("VV"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;var i=n.videoUrl.lastIndexOf(".");var s=n.videoUrl.substr(i,n.videoUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/VV"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateV;e.push(r)}if(entries.indexOf("VP"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/VP"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateP;e.push(r)}if(entries.indexOf("VT"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/VT"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.panelDiscussions,function(t,n){if(entries.indexOf("PA"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;var i=n.audioUrl.lastIndexOf(".");var s=n.audioUrl.substr(i,n.audioUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/PA"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateA;e.push(r)}if(entries.indexOf("PV"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;var i=n.videoUrl.lastIndexOf(".");var s=n.videoUrl.substr(i,n.videoUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/PV"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateV;e.push(r)}if(entries.indexOf("PP"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/PP"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateP;e.push(r)}if(entries.indexOf("PT"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/PT"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.interviews,function(t,n){if(entries.indexOf("IA"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;var i=n.audioUrl.lastIndexOf(".");var s=n.audioUrl.substr(i,n.audioUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/IA"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateA;e.push(r)}if(entries.indexOf("IV"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;var i=n.videoUrl.lastIndexOf(".");var s=n.videoUrl.substr(i,n.videoUrl.length);var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/IV"+n.itemId+s;r.path=u;r.ddate=n.downloadedDateV;e.push(r)}if(entries.indexOf("IP"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/IP"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateP;e.push(r)}if(entries.indexOf("IT"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;var o=n.localPathTranscript.lastIndexOf("/");var u=n.localPathTranscript.substr(0,o);u=u+"/IT"+n.itemId+".pdf";r.path=u;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.technologySessions,function(t,n){if(entries.indexOf("AA"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/AA"+n.itemId+".mp3";r.path=s;r.path=s;r.ddate=n.downloadedDateA;e.push(r)}if(entries.indexOf("AV"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/AV"+n.itemId+".mp4";r.path=s;r.ddate=n.downloadedDateV;e.push(r)}if(entries.indexOf("AP"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/AP"+n.itemId+".pdf";r.path=s;r.ddate=n.downloadedDateP;e.push(r)}if(entries.indexOf("AT"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/AT"+n.itemId+".pdf";r.path=s;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.technologySessions,function(t,n){if(entries.indexOf("VA"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/VA"+n.itemId+".mp3";r.path=s;r.path=s;r.ddate=n.downloadedDateA;e.push(r)}if(entries.indexOf("VV"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/VV"+n.itemId+".mp4";r.path=s;r.ddate=n.downloadedDateV;e.push(r)}if(entries.indexOf("VP"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/VP"+n.itemId+".pdf";r.path=s;r.ddate=n.downloadedDateP;e.push(r)}if(entries.indexOf("VT"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;var i=n.localPathTranscript.lastIndexOf("/");var s=n.localPathTranscript.substr(0,i);s=s+"/VT"+n.itemId+".pdf";r.path=s;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.documents,function(t,n){if(entries.indexOf("DD"+n.itemId)!=-1){var r=new Object;r.id=n.itemId;r.val="5";r.title=n.title;var i=n.localPath.lastIndexOf("/");var s=n.localPath.substr(0,i);s=s+"/DD"+n.itemId+".pdf";r.path=s;r.ddate=n.downloadedDateD;e.push(r)}});e.sort(function(e,t){var n=new Date(e.ddate),r=new Date(t.ddate);return r-n});var t=unique(e);for(var n=0;n<t.length;n++){var r=t[n].path;r=r.substring(r.lastIndexOf("/")+1,r.length)}}function refreshFileSystem(){entries=[];entries=new Array;window.requestFileSystem(LocalFileSystem.PERSISTENT,0,gotFS,errorFileSystem)}var filePath;var id=cordova.createUID();window.ChildBrowser=ChildBrowser;var currDownload="";var dwPgflag=false;var openDeleteDocumentPath="";var ftd=new FileTransfer;var thumbTestVar=0;var actualTestVar=0